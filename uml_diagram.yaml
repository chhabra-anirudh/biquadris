diagram:
  name: "Biquadris Complete UML"
  type: "class"
  description: |
    Full class inventory for the Biquadris codebase, including every
    member field (private/protected/public), method (constructors,
    destructors, helpers, operators), constants, and primary
    relationships.

classes:
  - name: Position
    module: Position
    stereotype: struct
    fields:
      - { name: row, type: int, visibility: public }
      - { name: col, type: int, visibility: public }
    methods:
      - { name: Position, kind: constructor, parameters: ["int row = 0", "int col = 0"], visibility: public }
      - { name: operator==, return_type: bool, parameters: ["const Position& other"], visibility: public, const: true }
      - { name: operator!=, return_type: bool, parameters: ["const Position& other"], visibility: public, const: true }

  - name: Cell
    module: Block
    fields:
      - { name: row, type: int, visibility: private }
      - { name: col, type: int, visibility: private }
      - { name: occupiedBy, type: Block*, visibility: private }
      - { name: isEmpty, type: bool, visibility: private }
    methods:
      - { name: Cell, kind: constructor, parameters: ["int row = 0", "int col = 0"], visibility: public }
      - { name: occupy, return_type: void, parameters: ["Block* block"], visibility: public }
      - { name: clear, return_type: void, visibility: public }
      - { name: getBlock, return_type: Block*, visibility: public, const: true }
      - { name: empty, return_type: bool, visibility: public, const: true }
      - { name: getRow, return_type: int, visibility: public, const: true }
      - { name: getCol, return_type: int, visibility: public, const: true }
    relationships:
      - { type: association, target: Block, role: occupant }

  - name: Block
    module: Block
    stereotype: abstract
    fields:
      - { name: blockType, type: char, visibility: private }
      - { name: level, type: int, visibility: private }
      - { name: cells, type: vector<Cell*>, visibility: private }
      - { name: bottomLeft, type: Position, visibility: private }
      - { name: orientation, type: int, visibility: private }
      - { name: isHeavy, type: bool, visibility: private }
      - { name: isPlaced, type: bool, visibility: private }
      - { name: cellsFilled, type: int, visibility: private }
      - { name: scored, type: bool, visibility: private }
    methods:
      - { name: Block, kind: constructor, parameters: ["char type", "int level", "bool heavy = false"], visibility: public }
      - { name: ~Block, kind: destructor, visibility: public, virtual: true }
      - { name: setPosition, return_type: void, parameters: ["const Position& pos"], visibility: public }
      - { name: getPosition, return_type: Position, visibility: public, const: true }
      - { name: rotateClockwise, return_type: void, visibility: public }
      - { name: rotateCounterClockwise, return_type: void, visibility: public }
      - { name: getCurrentPositions, return_type: vector<Position>, visibility: public, const: true }
      - { name: getType, return_type: char, visibility: public, const: true }
      - { name: getLevel, return_type: int, visibility: public, const: true }
      - { name: heavy, return_type: bool, visibility: public, const: true }
      - { name: setHeavy, return_type: void, parameters: ["bool heavy"], visibility: public }
      - { name: placed, return_type: bool, visibility: public, const: true }
      - { name: setPlaced, return_type: void, parameters: ["bool placed"], visibility: public }
      - { name: setCellsFilled, return_type: void, parameters: ["int num"], visibility: public }
      - { name: addCell, return_type: void, parameters: ["Cell* cell"], visibility: public }
      - { name: removeCell, return_type: void, parameters: ["Cell* cell"], visibility: public }
      - { name: getCells, return_type: "const vector<Cell*>&", visibility: public, const: true }
      - { name: isFilled, return_type: bool, visibility: public }
      - { name: decrementCell, return_type: void, visibility: public }
      - { name: getOrientation, return_type: int, visibility: public, const: true }
      - { name: hasScored, return_type: bool, visibility: public, const: true }
      - { name: setScored, return_type: void, parameters: ["bool scored = true"], visibility: public }
      - { name: getShapeCoordinates, return_type: vector<Position>, visibility: protected, const: true, pure_virtual: true }
    relationships:
      - { type: aggregation, target: Cell, multiplicity: "*" }
      - { type: dependency, target: Position }

  - name: IBlock
    module: IBlock
    parent: Block
    methods:
      - { name: IBlock, kind: constructor, parameters: ["int level", "bool heavy = false"], visibility: public }
      - { name: getShapeCoordinates, return_type: vector<Position>, visibility: protected, const: true, override: true }

  - name: JBlock
    module: JBlock
    parent: Block
    methods:
      - { name: JBlock, kind: constructor, parameters: ["int level", "bool heavy = false"], visibility: public }
      - { name: getShapeCoordinates, return_type: vector<Position>, visibility: protected, const: true, override: true }

  - name: LBlock
    module: LBlock
    parent: Block
    methods:
      - { name: LBlock, kind: constructor, parameters: ["int level", "bool heavy = false"], visibility: public }
      - { name: getShapeCoordinates, return_type: vector<Position>, visibility: protected, const: true, override: true }

  - name: OBlock
    module: OBlock
    parent: Block
    methods:
      - { name: OBlock, kind: constructor, parameters: ["int level", "bool heavy = false"], visibility: public }
      - { name: getShapeCoordinates, return_type: vector<Position>, visibility: protected, const: true, override: true }

  - name: SBlock
    module: SBlock
    parent: Block
    methods:
      - { name: SBlock, kind: constructor, parameters: ["int level", "bool heavy = false"], visibility: public }
      - { name: getShapeCoordinates, return_type: vector<Position>, visibility: protected, const: true, override: true }

  - name: ZBlock
    module: ZBlock
    parent: Block
    methods:
      - { name: ZBlock, kind: constructor, parameters: ["int level", "bool heavy = false"], visibility: public }
      - { name: getShapeCoordinates, return_type: vector<Position>, visibility: protected, const: true, override: true }

  - name: TBlock
    module: TBlock
    parent: Block
    methods:
      - { name: TBlock, kind: constructor, parameters: ["int level", "bool heavy = false"], visibility: public }
      - { name: getShapeCoordinates, return_type: vector<Position>, visibility: protected, const: true, override: true }

  - name: StarBlock
    module: StarBlock
    parent: Block
    methods:
      - { name: StarBlock, kind: constructor, parameters: ["int level", "bool heavy = false"], visibility: public }
      - { name: getShapeCoordinates, return_type: vector<Position>, visibility: protected, const: true, override: true }

  - name: Level
    module: Level
    stereotype: abstract
    fields:
      - { name: levelNum, type: int, visibility: protected }
      - { name: isRandom, type: bool, visibility: protected }
      - { name: sequence, type: string, visibility: protected }
      - { name: filestream, type: ifstream, visibility: protected }
      - { name: seed, type: int, visibility: protected }
    methods:
      - { name: Level, kind: constructor, parameters: ["int levelNum", "const string& sequence", "int seed"], visibility: public }
      - { name: ~Level, kind: destructor, visibility: public, virtual: true }
      - { name: generateBlock, return_type: unique_ptr<Block>, visibility: public, pure_virtual: true }
      - { name: setRandom, return_type: void, parameters: ["bool random"], visibility: public, virtual: true }
      - { name: setSequenceFile, return_type: void, parameters: ["const string& filename"], visibility: public }
      - { name: getLevelNum, return_type: int, visibility: public, const: true }
      - { name: random, return_type: bool, visibility: public, const: true }
      - { name: createBlock, return_type: unique_ptr<Block>, parameters: ["char type", "bool heavy = false"], visibility: protected }

  - name: Level0
    module: Level0
    parent: Level
    methods:
      - { name: Level0, kind: constructor, parameters: ["const string& sequence", "int seed"], visibility: public }
      - { name: generateBlock, return_type: unique_ptr<Block>, visibility: public, override: true }

  - name: Level1
    module: Level1
    parent: Level
    methods:
      - { name: Level1, kind: constructor, parameters: ["const string& sequence", "int seed"], visibility: public }
      - { name: generateBlock, return_type: unique_ptr<Block>, visibility: public, override: true }

  - name: Level2
    module: Level2
    parent: Level
    methods:
      - { name: Level2, kind: constructor, parameters: ["const string& sequence", "int seed"], visibility: public }
      - { name: generateBlock, return_type: unique_ptr<Block>, visibility: public, override: true }

  - name: Level3
    module: Level3
    parent: Level
    methods:
      - { name: Level3, kind: constructor, parameters: ["const string& sequence", "int seed"], visibility: public }
      - { name: generateBlock, return_type: unique_ptr<Block>, visibility: public, override: true }

  - name: Level4
    module: Level4
    parent: Level
    methods:
      - { name: Level4, kind: constructor, parameters: ["const string& sequence", "int seed"], visibility: public }
      - { name: generateBlock, return_type: unique_ptr<Block>, visibility: public, override: true }

  - name: Subject
    module: Subject
    stereotype: abstract
    fields:
      - { name: observers, type: vector<Observer*>, visibility: protected }
    methods:
      - { name: attach, return_type: void, parameters: ["Observer* o"], visibility: public }
      - { name: detach, return_type: void, parameters: ["Observer* o"], visibility: public }
      - { name: notifyObservers, return_type: void, visibility: public }
      - { name: ~Subject, kind: destructor, visibility: public, pure_virtual: true }

  - name: Observer
    module: Observer
    stereotype: abstract
    methods:
      - { name: notify, return_type: void, visibility: public, pure_virtual: true }
      - { name: ~Observer, kind: destructor, visibility: public, virtual: true }

  - name: Board
    module: Board
    parent: Subject
    fields:
      - { name: WIDTH, type: "inline static const int = 11", visibility: private }
      - { name: HEIGHT, type: "inline static const int = 18", visibility: private }
      - { name: DISPLAY_HEIGHT, type: "inline static const int = 15", visibility: private }
      - { name: cells, type: "vector<vector<unique_ptr<Cell>>>", visibility: private }
      - { name: placedBlocks, type: "vector<Block*>", visibility: private }
    methods:
      - { name: Board, kind: constructor, visibility: public }
      - { name: ~Board, kind: destructor, visibility: public }
      - { name: Board, kind: copy_constructor, visibility: public, deleted: true }
      - { name: operator=, kind: assignment, visibility: public, deleted: true }
      - { name: placeBlock, return_type: bool, parameters: ["Block* block"], visibility: public }
      - { name: canPlace, return_type: bool, parameters: ["Block* block", "int row", "int col"], visibility: public, const: true }
      - { name: canPlaceAtPositions, return_type: bool, parameters: ["const vector<Position>& positions"], visibility: public, const: true }
      - { name: removeBlock, return_type: void, parameters: ["Block* block"], visibility: public }
      - { name: clearFullRows, return_type: int, visibility: public }
      - { name: isRowFull, return_type: bool, parameters: ["int row"], visibility: public, const: true }
      - { name: clearRow, return_type: void, parameters: ["int row"], visibility: public }
      - { name: dropRowsAbove, return_type: void, parameters: ["int clearedRow"], visibility: public }
      - { name: createStarBlock, return_type: Block*, visibility: public }
      - { name: getCell, return_type: Cell*, parameters: ["int row", "int col"], visibility: public, const: true }
      - { name: getWidth, return_type: int, visibility: public, const: true }
      - { name: getHeight, return_type: int, visibility: public, const: true }
      - { name: getDisplayHeight, return_type: int, visibility: public, const: true }

  - name: SpecialAction
    module: Player
    stereotype: abstract
    methods:
      - { name: apply, return_type: void, parameters: ["Player* player"], visibility: public, pure_virtual: true }
      - { name: getName, return_type: string, visibility: public, const: true, pure_virtual: true }
      - { name: ~SpecialAction, kind: destructor, visibility: public, virtual: true }

  - name: BlindAction
    module: Player
    parent: SpecialAction
    methods:
      - { name: apply, return_type: void, parameters: ["Player* player"], visibility: public, override: true }
      - { name: getName, return_type: string, visibility: public, const: true, override: true }

  - name: HeavyAction
    module: Player
    parent: SpecialAction
    methods:
      - { name: apply, return_type: void, parameters: ["Player* player"], visibility: public, override: true }
      - { name: getName, return_type: string, visibility: public, const: true, override: true }

  - name: ForceAction
    module: Player
    parent: SpecialAction
    fields:
      - { name: blockType, type: char, visibility: private }
    methods:
      - { name: ForceAction, kind: constructor, parameters: ["char blockType"], visibility: public }
      - { name: apply, return_type: void, parameters: ["Player* player"], visibility: public, override: true }
      - { name: getName, return_type: string, visibility: public, const: true, override: true }
      - { name: getBlockType, return_type: char, visibility: public, const: true }

  - name: Player
    module: Player
    fields:
      - { name: board, type: unique_ptr<Board>, visibility: private }
      - { name: currentBlock, type: unique_ptr<Block>, visibility: private }
      - { name: nextBlock, type: unique_ptr<Block>, visibility: private }
      - { name: level, type: unique_ptr<Level>, visibility: private }
      - { name: allBlocks, type: vector<unique_ptr<Block>>, visibility: private }
      - { name: score, type: int, visibility: private }
      - { name: currentLevel, type: int, visibility: private }
      - { name: isBlind, type: bool, visibility: private }
      - { name: heavyEffect, type: int, visibility: private }
      - { name: blocksWithoutClear, type: int, visibility: private }
      - { name: lastRowsCleared, type: int, visibility: private }
      - { name: sequenceFile, type: string, visibility: private }
      - { name: seed, type: int, visibility: private }
      - { name: isRandom, type: bool, visibility: private }
    methods:
      - { name: Player, kind: constructor, parameters: ["int startLevel", "const string& scriptFile", "int seed"], visibility: public }
      - { name: ~Player, kind: destructor, visibility: public, defaulted: true }
      - { name: moveLeft, return_type: bool, parameters: ["int n = 1"], visibility: public }
      - { name: moveRight, return_type: bool, parameters: ["int n = 1"], visibility: public }
      - { name: moveDown, return_type: bool, parameters: ["int n = 1"], visibility: public }
      - { name: rotate, return_type: bool, parameters: ["bool clockwise", "int multiplier = 1"], visibility: public }
      - { name: drop, return_type: void, parameters: ["int multiplier = 1"], visibility: public }
      - { name: levelUp, return_type: void, parameters: ["int multiplier = 1"], visibility: public }
      - { name: levelDown, return_type: void, parameters: ["int multiplier = 1"], visibility: public }
      - { name: setLevel, return_type: void, parameters: ["int newLevel"], visibility: public }
      - { name: setNoRandom, return_type: void, parameters: ["const string& file"], visibility: public }
      - { name: setRandom, return_type: void, visibility: public }
      - { name: applySpecialAction, return_type: void, parameters: ["SpecialAction* action"], visibility: public }
      - { name: setBlind, return_type: void, parameters: ["bool blind"], visibility: public }
      - { name: incrementHeavyEffect, return_type: void, visibility: public }
      - { name: forceBlock, return_type: void, parameters: ["char type"], visibility: public }
      - { name: replaceBlock, return_type: void, parameters: ["char type"], visibility: public }
      - { name: getBoard, return_type: Board*, visibility: public, const: true }
      - { name: getCurrentBlock, return_type: Block*, visibility: public, const: true }
      - { name: getNextBlock, return_type: Block*, visibility: public, const: true }
      - { name: getScore, return_type: int, visibility: public, const: true }
      - { name: getLevel, return_type: int, visibility: public, const: true }
      - { name: blind, return_type: bool, visibility: public, const: true }
      - { name: getHeavyEffect, return_type: int, visibility: public, const: true }
      - { name: getBlocksWithoutClear, return_type: int, visibility: public, const: true }
      - { name: getLastRowsCleared, return_type: int, visibility: public, const: true }
      - { name: addScore, return_type: void, parameters: ["int points"], visibility: public }
      - { name: setScore, return_type: void, parameters: ["int newScore"], visibility: public }
      - { name: isGameOver, return_type: bool, visibility: public, const: true }
      - { name: reset, return_type: void, visibility: public }
      - { name: generateNextBlock, return_type: void, visibility: private }
      - { name: canMove, return_type: bool, parameters: ["const Position& newPos"], visibility: private }
      - { name: applyHeavyDrop, return_type: void, parameters: ["bool rotateOn = false"], visibility: private }
      - { name: dropOnce, return_type: void, visibility: private }
      - { name: createLevel, return_type: unique_ptr<Level>, parameters: ["int levelNum", "const string& scriptFile", "int seed"], visibility: private }

  - name: CommandInterpreter
    module: CommandInterpreter
    fields:
      - { name: commandMap, type: map<string,string>, visibility: private }
    methods:
      - { name: CommandInterpreter, kind: constructor, visibility: public }
      - { name: parse, return_type: bool, parameters: ["const string& input", "Player* current", "Player* opponent"], visibility: public }
      - { name: executeSequence, return_type: void, parameters: ["const string& filename", "Player* current", "Player* opponent"], visibility: public }
      - { name: CommandInitialise, return_type: void, visibility: private }
      - { name: matchCommand, return_type: string, parameters: ["const string& input"], visibility: private }

  - name: TextDisplay
    module: TextDisplay
    parent: Observer
    fields:
      - { name: ROW_COUNT, type: "static const int = 18", visibility: private }
      - { name: COL_COUNT, type: "static const int = 11", visibility: private }
      - { name: grid1, type: "char[ROW_COUNT][COL_COUNT]", visibility: private }
      - { name: grid2, type: "char[ROW_COUNT][COL_COUNT]", visibility: private }
      - { name: board1, type: Board*, visibility: private }
      - { name: board2, type: Board*, visibility: private }
      - { name: player1, type: Player*, visibility: private }
      - { name: player2, type: Player*, visibility: private }
      - { name: hiScore, type: int, visibility: private }
    methods:
      - { name: TextDisplay, kind: constructor, parameters: ["Board* b1", "Board* b2", "Player* p1", "Player* p2"], visibility: public }
      - { name: notify, return_type: void, visibility: public, override: true }
      - { name: display, return_type: void, parameters: ["ostream& out"], visibility: public }
      - { name: setHiScore, return_type: void, parameters: ["int score"], visibility: public }
      - { name: updateBoards, return_type: void, parameters: ["Board* b1", "Board* b2"], visibility: public }
      - { name: updateGrid, return_type: void, parameters: ["char grid[ROW_COUNT][COL_COUNT]", "Board* board", "Player* player"], visibility: private }
      - { name: drawGrid, return_type: void, parameters: ["ostream& out", "char grid[ROW_COUNT][COL_COUNT]", "Player* player", "int playerNum"], visibility: private }

  - name: GraphicsDisplay
    module: GraphicsDisplay
    parent: Observer
    constants:
      - { name: CELL_SIZE, type: "static const int = 20" }
      - { name: BOARD_WIDTH, type: "static const int = 11" }
      - { name: BOARD_HEIGHT, type: "static const int = 15" }
      - { name: BOARD_OFFSET_X, type: "static const int = 50" }
      - { name: BOARD1_OFFSET_Y, type: "static const int = 100" }
      - { name: BOARD2_OFFSET_X, type: "static const int = 350" }
    fields:
      - { name: xw, type: unique_ptr<Xwindow>, visibility: private }
      - { name: board1, type: Board*, visibility: private }
      - { name: board2, type: Board*, visibility: private }
      - { name: player1, type: Player*, visibility: private }
      - { name: player2, type: Player*, visibility: private }
      - { name: hiScore, type: int, visibility: private }
    methods:
      - { name: GraphicsDisplay, kind: constructor, parameters: ["Board* b1", "Board* b2", "Player* p1", "Player* p2"], visibility: public }
      - { name: ~GraphicsDisplay, kind: destructor, visibility: public, defaulted: true }
      - { name: notify, return_type: void, visibility: public, override: true }
      - { name: setHiScore, return_type: void, parameters: ["int score"], visibility: public }
      - { name: updateBoards, return_type: void, parameters: ["Board* b1", "Board* b2"], visibility: public }
      - { name: getBlockColor, return_type: int, parameters: ["char blockType"], visibility: private, const: true }
      - { name: drawCell, return_type: void, parameters: ["int x", "int y", "int color"], visibility: private }
      - { name: drawBoard, return_type: void, parameters: ["int boardNum"], visibility: private }
      - { name: drawBorders, return_type: void, visibility: private }
      - { name: drawInfo, return_type: void, visibility: private }
      - { name: drawNextBlock, return_type: void, parameters: ["Player* player", "int x", "int y"], visibility: private }

  - name: Xwindow
    module: XWindow
    fields:
      - { name: d, type: Display*, visibility: private }
      - { name: w, type: Window, visibility: private }
      - { name: s, type: int, visibility: private }
      - { name: gc, type: GC, visibility: private }
      - { name: colours, type: "unsigned long[10]", visibility: private }
    enums:
      - { name: Colour, values: ["White","Black","Red","Green","Blue","Cyan","Yellow","Magenta","Orange","Brown"] }
    methods:
      - { name: Xwindow, kind: constructor, parameters: ["int width = 500", "int height = 500"], visibility: public }
      - { name: ~Xwindow, kind: destructor, visibility: public }
      - { name: Xwindow, kind: copy_constructor, visibility: public, deleted: true }
      - { name: operator=, kind: assignment, visibility: public, deleted: true }
      - { name: fillRectangle, return_type: void, parameters: ["int x", "int y", "int width", "int height", "int colour = Black"], visibility: public }
      - { name: drawString, return_type: void, parameters: ["int x", "int y", "std::string msg"], visibility: public }

  - name: Game
    module: Game
    fields:
      - { name: player1, type: unique_ptr<Player>, visibility: private }
      - { name: player2, type: unique_ptr<Player>, visibility: private }
      - { name: currentPlayer, type: Player*, visibility: private }
      - { name: opponent, type: Player*, visibility: private }
      - { name: textDisplay, type: unique_ptr<TextDisplay>, visibility: private }
      - { name: graphicsDisplay, type: unique_ptr<GraphicsDisplay>, visibility: private }
      - { name: interpreter, type: unique_ptr<CommandInterpreter>, visibility: private }
      - { name: seed, type: int, visibility: private }
      - { name: hiScore, type: int, visibility: private }
      - { name: textOnly, type: bool, visibility: private }
    methods:
      - { name: Game, kind: constructor, parameters: ["int startLevel", "int seed", "const string& scriptFile1", "const string& scriptFile2", "bool textOnly"], visibility: public }
      - { name: ~Game, kind: destructor, visibility: public, defaulted: true }
      - { name: run, return_type: void, visibility: public }
      - { name: switchPlayer, return_type: void, visibility: public }
      - { name: restart, return_type: void, visibility: public }
      - { name: handleSpecialAction, return_type: void, visibility: public }
      - { name: getHiScore, return_type: int, visibility: public, const: true }
      - { name: updateHiScore, return_type: void, visibility: public }

relationships:
  - { type: inheritance, source: Board, target: Subject }
  - { type: inheritance, source: TextDisplay, target: Observer }
  - { type: inheritance, source: GraphicsDisplay, target: Observer }
  - { type: inheritance, source: [IBlock,JBlock,LBlock,OBlock,SBlock,ZBlock,TBlock,StarBlock], target: Block }
  - { type: inheritance, source: [Level0,Level1,Level2,Level3,Level4], target: Level }
  - { type: inheritance, source: BlindAction, target: SpecialAction }
  - { type: inheritance, source: HeavyAction, target: SpecialAction }
  - { type: inheritance, source: ForceAction, target: SpecialAction }
  - { type: aggregation, source: Player, target: Board }
  - { type: aggregation, source: Player, target: Level }
  - { type: aggregation, source: Player, target: Block }
  - { type: aggregation, source: Board, target: Block }
  - { type: aggregation, source: Board, target: Cell }
  - { type: composition, source: Game, target: Player }
  - { type: composition, source: Game, target: TextDisplay }
  - { type: composition, source: Game, target: GraphicsDisplay }
  - { type: composition, source: Game, target: CommandInterpreter }
  - { type: dependency, source: CommandInterpreter, target: Player }
  - { type: dependency, source: GraphicsDisplay, target: Xwindow }

